# Проект: Система управления личными финансами (Personal Finance Manager)

## 1. Название проекта

**Personal Finance Manager (PFM)** - Система учета и анализа личных финансов

## 2. Проблема или Возможность

Существующие методы ведения личных финансов (тетради, таблицы Excel, банковские приложения) не дают полной картины финансового состояния пользователя. Пользователи тратят много времени на ручной учет расходов и доходов, теряют чеки, забывают записать операции, не имеют удобных инструментов для анализа трат и планирования бюджета. Это приводит к неконтролируемым тратам, невозможности накопить на крупные покупки и финансовому стрессу.

## 3. Цели проекта

- Автоматизировать процесс учета личных финансовых операций
- Обеспечить наглядное представление финансовой статистики в виде отчетов и графиков  
- Снизить время на ведение финансового учета с 30 минут в день до 5 минут
- Предоставить инструменты для планирования бюджета и контроля расходов по категориям
- Повысить финансовую грамотность пользователя через аналитику трат

## 4. Основной функционал (MVP)

1. **Управление финансовыми операциями**
   - Добавление операции (дата, сумма, тип доход/расход, категория, описание)
   - Редактирование и удаление операций
   - Просмотр списка всех операций с фильтрацией

2. **Управление категориями**
   - Создание, редактирование и удаление категорий операций
   - Группировка операций по категориям

3. **Отчетность и анализ**
   - Расчет и отображение текущего баланса
   - Просмотр суммы доходов и расходов за выбранный период
   - Группировка операций по категориям с суммами

4. **Работа с данными**
   - Сохранение данных в локальную базу данных
   - Экспорт данных в CSV формат

## 5. Целевая аудитория

**Основная аудитория:**
- Студенты и молодые специалисты (18-35 лет), желающие навести порядок в личных финансах
- Люди с нерегулярными доходами (фрилансеры, предприниматели)
- Семьи, ведущие семейный бюджет

**Пример пользователя:** 
Студент 3 курса, получающий стипендию и подрабатывающий, который хочет контролировать свои расходы, накопить на ноутбук и не уходить в минус к концу месяца.

## 6. Технологический стек

**Backend и логика приложения:**
- **Язык программирования:** Python 3.8+
- **База данных:** SQLite (для простоты развертывания и портативности)
- **ORM:** SQLAlchemy (для удобной работы с базой данных)

**Пользовательский интерфейс:**
- **GUI Framework:** Tkinter (входит в стандартную поставку Python)
- **Графики и отчеты:** matplotlib (для построения диаграмм)

**Инструменты разработки:**
- **Система контроля версий:** Git
- **Менеджер зависимостей:** pip + requirements.txt
- **Тестирование:** unittest (встроенный в Python)

**Обоснование выбора:**
Python выбран за простоту разработки и богатую экосистему библиотек. SQLite обеспечивает локальное хранение без необходимости установки отдельного сервера БД. Tkinter позволяет создать кроссплатформенный GUI без дополнительных зависимостей.

## 7. Основные модули системы

- **core (Ядро):** Содержит основные сущности приложения (Operation, Category, Account) и бизнес-правила валидации данных. Отвечает за корректность данных и бизнес-логику (например, сумма операции не может быть отрицательной).

- **data (Работа с данными):** Обеспечивает взаимодействие с системой хранения данных SQLite. Содержит репозитории для операций CRUD (создание, чтение, обновление, удаление) с операциями и категориями.

- **services (Сервисный слой):** Содержит бизнес-логику приложения: расчет баланса, формирование отчетов, фильтрация операций по различным критериям, экспорт данных.

- **ui (Пользовательский интерфейс):** Отвечает за визуальное представление данных и взаимодействие с пользователем. Включает главное окно, диалоги добавления/редактирования операций, окна отчетов.

- **application (Приложение):** Координирует работу всех модулей, содержит точку входа в программу, инициализацию базы данных и конфигурацию приложения.

## 8. Критерии успеха

Проект считается успешным, если:

- **Функциональность:** Реализован весь запланированный MVP функционал
- **Удобство использования:** Интерфейс интуитивно понятен, время обучения базовым операциям не превышает 15 минут
- **Надежность:** Приложение стабильно работает без критических ошибок, данные не теряются при некорректном завершении
- **Производительность:** Время отклика на пользовательские действия не превышает 2 секунд
- **Тестируемость:** Покрытие кода тестами не менее 70%

---

## Планирование разработки

### Базовые требования (MVP - Минимально жизнеспособный продукт):

1. **Управление операциями**
   - Добавление операции с указанием даты, суммы, типа (доход/расход), категории и описания
   - Просмотр списка операций в табличном виде
   - Редактирование и удаление выбранной операции
   - Фильтрация операций по дате и категории

2. **Управление категориями** 
   - Создание новых категорий операций
   - Редактирование названий категорий
   - Удаление неиспользуемых категорий
   - Просмотр списка всех категорий

3. **Базовая отчетность**
   - Отображение текущего баланса (сумма доходов минус сумма расходов)
   - Просмотр общей суммы доходов и расходов
   - Группировка операций по категориям с отображением сумм

4. **Сохранение данных**
   - Автоматическое сохранение всех операций в локальную базу данных SQLite
   - Загрузка ранее сохраненных данных при запуске приложения

### Расширенный функционал (для будущих версий):

1. **Продвинутая аналитика**
   - Построение графиков доходов и расходов по месяцам
   - Анализ трат по категориям в виде круговых диаграмм
   - Сравнение текущего периода с предыдущими

2. **Планирование и цели**
   - Установка лимитов трат по категориям
   - Создание финансовых целей (накопление на покупки)
   - Уведомления о превышении лимитов

3. **Импорт/Экспорт данных**
   - Экспорт данных в форматы CSV и Excel
   - Импорт операций из банковских выписок
   - Резервное копирование и восстановление данных

4. **Дополнительные возможности**
   - Поддержка нескольких валют
   - Темная тема интерфейса
   - Поиск операций по описанию

### Выбор технологического стека

**Язык программирования:** Python 3.8+
- Простота разработки и отладки
- Богатая стандартная библиотека
- Хорошая поддержка работы с базами данных
- Кроссплатформенность

**Framework для UI:** Tkinter
- Входит в стандартную поставку Python (не требует дополнительной установки)
- Достаточный функционал для создания десктопного GUI
- Кроссплатформенность (Windows, Linux, macOS)
- Простота изучения и разработки

**База данных:** SQLite
- Не требует установки отдельного сервера
- Встроена в Python
- Надежность и соответствие ACID принципам
- Подходит для локальных приложений

**Система контроля версий:** Git
- Стандарт индустрии для версионирования кода
- Возможность отслеживать изменения и откатывать версии
- Интеграция с популярными платформами (GitHub, GitLab)

**Менеджер зависимостей:** pip + requirements.txt
- Стандартный инструмент для Python
- Простота управления зависимостями
- Воспроизводимость окружения разработки

## Логическая архитектура

### 1. core (Ядро доменной логики)
Содержит основные сущности бизнес-логики и правила валидации:
- **Entities:** Классы Operation, Category, Account
- **Validators:** Проверка корректности данных операций
- **Exceptions:** Пользовательские исключения для обработки ошибок

### 2. data (Слой данных) 
Обеспечивает взаимодействие с системой хранения данных:
- **Database:** Класс для управления соединением с SQLite
- **Repositories:** Классы для выполнения CRUD операций с сущностями
- **Models:** ORM модели для работы с SQLAlchemy

### 3. services (Сервисный слой)
Содержит бизнес-логику приложения, не относящуюся к сущностям:
- **BalanceService:** Расчет текущего баланса и статистики
- **ReportService:** Формирование отчетов и группировка данных
- **ExportService:** Экспорт данных в различные форматы

### 4. ui (Пользовательский интерфейс)
Слой представления и взаимодействия с пользователем:
- **Windows:** Главное окно и диалоговые окна
- **Widgets:** Переиспользуемые компоненты интерфейса
- **Controllers:** Обработчики событий пользовательского интерфейса

### 5. application (Слой приложения)
Координирует работу всех модулей и содержит конфигурацию:
- **App:** Главный класс приложения и точка входа
- **Config:** Настройки приложения и подключения к БД
- **DI Container:** Управление зависимостями между модулями

## Файловая структура проекта

```
pfm-app/
│
├── .gitignore                    # Исключения для Git
├── README.md                     # Описание проекта
├── requirements.txt              # Зависимости Python
├── main.py                       # Точка входа в приложение
│
├── src/                          # Исходный код
│   ├── __init__.py
│   │
│   ├── core/                     # Ядро доменной логики
│   │   ├── __init__.py
│   │   ├── entities/
│   │   │   ├── __init__.py
│   │   │   ├── operation.py      # Класс Operation
│   │   │   ├── category.py       # Класс Category
│   │   │   └── account.py        # Класс Account
│   │   ├── validators/
│   │   │   ├── __init__.py
│   │   │   └── operation_validator.py
│   │   └── exceptions.py         # Пользовательские исключения
│   │
│   ├── data/                     # Слой данных
│   │   ├── __init__.py
│   │   ├── database.py           # Управление подключением к БД
│   │   ├── models/               # ORM модели
│   │   │   ├── __init__.py
│   │   │   ├── operation_model.py
│   │   │   └── category_model.py
│   │   └── repositories/         # Репозитории для доступа к данным
│   │       ├── __init__.py
│   │       ├── operation_repository.py
│   │       └── category_repository.py
│   │
│   ├── services/                 # Сервисный слой
│   │   ├── __init__.py
│   │   ├── balance_service.py    # Расчет баланса
│   │   ├── report_service.py     # Формирование отчетов
│   │   └── export_service.py     # Экспорт данных
│   │
│   ├── ui/                       # Пользовательский интерфейс
│   │   ├── __init__.py
│   │   ├── main_window.py        # Главное окно
│   │   ├── dialogs/
│   │   │   ├── __init__.py
│   │   │   ├── add_operation_dialog.py
│   │   │   ├── edit_operation_dialog.py
│   │   │   └── category_dialog.py
│   │   ├── widgets/
│   │   │   ├── __init__.py
│   │   │   ├── operations_table.py
│   │   │   └── balance_widget.py
│   │   └── controllers/
│   │       ├── __init__.py
│   │       └── main_controller.py
│   │
│   └── application/              # Слой приложения
│       ├── __init__.py
│       ├── app.py               # Главный класс приложения
│       ├── config.py            # Конфигурация
│       └── container.py         # DI контейнер
│
├── tests/                        # Тесты
│   ├── __init__.py
│   ├── unit/
│   │   ├── test_core/
│   │   │   ├── test_entities.py
│   │   │   └── test_validators.py
│   │   ├── test_services/
│   │   │   ├── test_balance_service.py
│   │   │   └── test_report_service.py
│   │   └── test_data/
│   │       └── test_repositories.py
│   └── integration/
│       └── test_app_integration.py
│
├── docs/                         # Документация
│   ├── Project_Plan.md          # Данный документ
│   ├── Technical_Requirements.md # Техническое задание
│   ├── User_Guide.md            # Руководство пользователя
│   └── Developer_Guide.md       # Руководство разработчика
│
├── resources/                    # Ресурсы приложения
│   ├── config/
│   │   └── app_config.ini       # Настройки приложения
│   ├── database/
│   │   └── init_schema.sql      # Скрипт создания БД
│   └── assets/
│       └── icons/               # Иконки для GUI
│
└── data/                        # Папка для файлов данных (в .gitignore)
    └── finance.db              # Файл базы данных SQLite
```
